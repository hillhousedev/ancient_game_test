{"version":3,"sources":["webpack://demo1/./src/config/database.ts","webpack://demo1/./src/config/dbconfig.ts","webpack://demo1/./src/config/redisConfig.ts","webpack://demo1/./src/main.ts","webpack://demo1/./src/resolvers.ts","webpack://demo1/./src/typedef.ts","webpack://demo1/./src/models/hobbies.js","webpack://demo1/./src/models/student.js","webpack://demo1/./src/models/user.js","webpack://demo1/external \"apollo-server\"","webpack://demo1/external \"graphql-redis-subscriptions\"","webpack://demo1/external \"ioredis\"","webpack://demo1/external \"moment\"","webpack://demo1/external \"sequelize\"","webpack://demo1/webpack/bootstrap","webpack://demo1/webpack/startup"],"names":["sequelize","authenticate","then","console","log","catch","err","error","module","exports","username","password","database","host","dialect","Object","defineProperty","value","RedisConfig","serverPort","process","env","SERVER_PORT","redisHost","REDIS_HOST","redisPort","REDIS_PORT","default","__importDefault","this","mod","__esModule","apollo_server_1","resolvers_1","typedef_1","ApolloServer","resolvers","typeDefs","listen","_a","url","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","User","Post","Student","Config","RedisPubSub","pubsub","connection","port","retry_strategy","options","Math","max","attempt","nextMessageId","messages","CHANNEL","subscribe","payload","message","notes","id","content","author","players","name","score","location","Query","testMessage","users","findAll","user","findOne","where","posts","post","getStudent","getAllStudents","getHobbies","root","_b","models","_c","Hobbies","findByPk","context","Mutation","createUser","email","create","updateUser","update","deleteUser","destroy","createPost","title","usersEmail","usersName","updatePost","deletePost","addMessage","newMessage","String","publish","messageAdded","createStudent","firstName","createHobbies","studentId","Subscription","asyncIterator","__makeTemplateObject","cooked","raw","templateObject_1","gql","Model","DataTypes","associate","belongsTo","Students","foreignKey","init","STRING","modelName","Sequelize","define","allowNull","type","unique","hasMany","require","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__"],"mappings":"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","file":"server.js","sourcesContent":["\"use strict\";\nvar Sequelize = require('sequelize');\nvar config = require('./dbconfig');\nvar sequelize = new Sequelize(config);\nsequelize.authenticate()\n    .then(function () {\n    console.log(\"Successfully connected to db\");\n})\n    .catch(function (err) {\n    console.error(' Error cant connect to db..', err);\n});\nmodule.exports = sequelize;\n","\"use strict\";\nmodule.exports = {\n    username: 'postgres',\n    password: 'root',\n    database: 'relay_dev',\n    host: '127.0.0.1',\n    dialect: 'postgres'\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RedisConfig = {\n    serverPort: process.env.SERVER_PORT || 3000,\n    redisHost: process.env.REDIS_HOST || 'localhost',\n    redisPort: process.env.REDIS_PORT || 6379\n};\nexports.default = RedisConfig;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar apollo_server_1 = require(\"apollo-server\");\nvar resolvers_1 = __importDefault(require(\"./resolvers\"));\nvar typedef_1 = __importDefault(require(\"./typedef\"));\nvar server = new apollo_server_1.ApolloServer({ resolvers: resolvers_1.default, typeDefs: typedef_1.default });\nserver.listen()\n    .then(function (_a) {\n    var url = _a.url;\n    return console.log(\"Server ready at \" + url + \". \");\n});\nif (module.hot) {\n    module.hot.accept();\n    module.hot.dispose(function () { return server.stop(); });\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar User = require('../src/models/user.js');\nvar Post = require('../src/models/user.js');\nvar Student = require('../src/models/student.js');\nvar Hobbies = require('../src/models/hobbies.js');\nvar Config = require('../src/config/redisConfig');\nvar RedisPubSub = require('graphql-redis-subscriptions').RedisPubSub;\nvar moment = require('moment');\nvar Redis = require('ioredis');\nvar options = {\n    host: Config.redisHost,\n    port: Config.redisPort,\n    retry_strategy: function (options) {\n        return Math.max(options.attempt * 100, 3000);\n    }\n};\nvar pubsub = new RedisPubSub({\n    connection: options\n});\nvar nextMessageId = 1;\nvar messages = [];\nvar CHANNEL = \"messageAdded\";\npubsub.subscribe(CHANNEL, function (payload) {\n    console.log(\"New message received on channel $(CHANNEL)\");\n    try {\n        var message = payload[CHANNEL];\n        messages.push(message);\n        console.log(\"Added message to database\");\n    }\n    catch (error) {\n        console.error(\"Error trying to extract new message from payload\");\n        console.error(error.message);\n    }\n});\nvar notes = [\n    { id: '1', content: 'This is a note', author: 'Adam Scott' },\n    { id: '2', content: 'This is another note', author: 'Harlow Everly' },\n    { id: '3', content: 'Hey look at another note!', author: 'Riley Harrison' },\n];\nvar players = [\n    { id: '1', name: 'Chisco', score: 50, location: 'New york' },\n    { id: '2', name: 'Deji', score: 80, location: 'France' },\n    { id: '3', name: 'Dele', score: 70, location: 'Canada' },\n    { id: '4', name: 'Chioma', score: 640, location: 'Imo' },\n];\nexports.default = {\n    Query: {\n        testMessage: function () { return 'Hello World!'; },\n        notes: function () { return notes; },\n        players: function () { return players; },\n        users: function () { return User.findAll(); },\n        user: function (_, _a) {\n            var id = _a.id;\n            return User.findOne({ where: { id: id } });\n        },\n        posts: function () { return Post.findAll(); },\n        post: function (_, _a) {\n            var id = _a.id;\n            return Post.findOne({ where: { id: id } });\n        },\n        getStudent: function (_, _a) {\n            var id = _a.id;\n            return Student.findOne({ where: { id: id } });\n        },\n        getAllStudents: function (_) { return Student.findAll(); },\n        getHobbies: function (root, _a, _b) {\n            var id = _a.id;\n            var models = _b.models;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_c) {\n                    return [2, models.Hobbies.findByPk(id)];\n                });\n            });\n        },\n        messages: function (root, _a, context) {\n            return messages;\n        }\n    },\n    Mutation: {\n        createUser: function (_, _a) {\n            var name = _a.name, email = _a.email;\n            return User.create({ name: name, email: email });\n        },\n        updateUser: function (_, _a) {\n            var name = _a.name, email = _a.email, id = _a.id;\n            return User.update({ name: name, email: email }, { where: { id: id } });\n        },\n        deleteUser: function (_, _a) {\n            var id = _a.id;\n            return User.destroy({ where: { id: id } });\n        },\n        createPost: function (_, _a) {\n            var title = _a.title, content = _a.content, usersEmail = _a.usersEmail, usersName = _a.usersName;\n            return Post.create({ title: title, content: content, usersEmail: usersEmail, usersName: usersName });\n        },\n        updatePost: function (_, _a) {\n            var title = _a.title, content = _a.content, id = _a.id;\n            return Post.update({ title: title, content: content }, { where: { id: id } });\n        },\n        deletePost: function (_, _a) {\n            var id = _a.id;\n            return Post.destroy({ where: { id: id } });\n        },\n        addMessage: function (root, _a) {\n            var message = _a.message;\n            console.log({ message: message });\n            var newMessage = { id: String(nextMessageId++), content: message };\n            pubsub.publish(CHANNEL, { messageAdded: newMessage });\n            return messages;\n        },\n        createStudent: function (_, _a) {\n            var firstName = _a.firstName, email = _a.email;\n            return Student.create({ firstName: firstName, email: email });\n        },\n        createHobbies: function (root, _a, _b) {\n            var studentId = _a.studentId, title = _a.title;\n            var models = _b.models;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_c) {\n                    return [2, models.Hobbies.create({ studentId: studentId, title: title })];\n                });\n            });\n        },\n    },\n    Subscription: {\n        messageAdded: {\n            subscribe: function () { return pubsub.asyncIterator(CHANNEL); },\n        },\n    },\n};\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar apollo_server_1 = require(\"apollo-server\");\nexports.default = apollo_server_1.gql(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n\\n  type Message {\\n      id: String \\n      content: String\\n  }\\n\\n  type Student {\\n      id: Int!\\n      firstName: String!\\n      email: String!\\n      hobbies: [Hobbies!]!\\n  }\\n\\n  type Hobbies {\\n      id: Int!\\n      title: String!\\n      student: Student!\\n  }\\n\\n\\n\\n\\n\\n  type Note {\\n      id: ID!\\n      content: String!\\n      author: String!\\n  }\\n\\n  type User {\\n      id: ID\\n      name: String \\n      email: String \\n  }\\n  type Post {\\n      id: ID\\n      title: String\\n      content: String\\n      usersEmail: String\\n      usersName: String\\n  }\\n\\n  type Player {\\n      id: ID!\\n      name: String!\\n      score: Int!\\n      location: String!\\n  }\\n\\n  type Query {\\n    \\\"\\\"\\\"\\n    Test Message. \\n    \\\"\\\"\\\"\\n    testMessage: String!\\n    notes: [Note!]!\\n    players: [Player!]!\\n    users: [User]\\n    user(id: ID): User\\n    posts: [Post]\\n    post(id: ID): Post\\n    messages: [Message!]!\\n    getStudent(id: Int!): Student\\n    getAllStudents: [Student!]!\\n    getHobbies(id: Int!): Hobbies\\n    getAllHobbies: [Hobbies!]!\\n\\n  }\\n\\n  type Mutation {\\n      createUser(name: String, email: String): User\\n      updateUser(name: String, email: String, id: ID): User\\n      deleteUser(id: ID): User\\n      createPost(title: String, content: String, usersEmail: String, usersName: String): Post\\n      updatePost(title: String, content: String, id: ID ): Post\\n      deletePost(id: ID): Post\\n      addMessage(message: String!): [String]!\\n\\n      createStudent(firstName: String!, email: String!): Student\\n      createHobbies( studentId: Int!, title: String!): Hobbies\\n  }\\n  \\n  type Subscription {\\n      messageAdded: Message\\n  }\\n\\n\\n\"], [\"\\n\\n  type Message {\\n      id: String \\n      content: String\\n  }\\n\\n  type Student {\\n      id: Int!\\n      firstName: String!\\n      email: String!\\n      hobbies: [Hobbies!]!\\n  }\\n\\n  type Hobbies {\\n      id: Int!\\n      title: String!\\n      student: Student!\\n  }\\n\\n\\n\\n\\n\\n  type Note {\\n      id: ID!\\n      content: String!\\n      author: String!\\n  }\\n\\n  type User {\\n      id: ID\\n      name: String \\n      email: String \\n  }\\n  type Post {\\n      id: ID\\n      title: String\\n      content: String\\n      usersEmail: String\\n      usersName: String\\n  }\\n\\n  type Player {\\n      id: ID!\\n      name: String!\\n      score: Int!\\n      location: String!\\n  }\\n\\n  type Query {\\n    \\\"\\\"\\\"\\n    Test Message. \\n    \\\"\\\"\\\"\\n    testMessage: String!\\n    notes: [Note!]!\\n    players: [Player!]!\\n    users: [User]\\n    user(id: ID): User\\n    posts: [Post]\\n    post(id: ID): Post\\n    messages: [Message!]!\\n    getStudent(id: Int!): Student\\n    getAllStudents: [Student!]!\\n    getHobbies(id: Int!): Hobbies\\n    getAllHobbies: [Hobbies!]!\\n\\n  }\\n\\n  type Mutation {\\n      createUser(name: String, email: String): User\\n      updateUser(name: String, email: String, id: ID): User\\n      deleteUser(id: ID): User\\n      createPost(title: String, content: String, usersEmail: String, usersName: String): Post\\n      updatePost(title: String, content: String, id: ID ): Post\\n      deletePost(id: ID): Post\\n      addMessage(message: String!): [String]!\\n\\n      createStudent(firstName: String!, email: String!): Student\\n      createHobbies( studentId: Int!, title: String!): Hobbies\\n  }\\n  \\n  type Subscription {\\n      messageAdded: Message\\n  }\\n\\n\\n\"])));\nvar templateObject_1;\n","'use strict';\nconst {\n  Model\n} = require('sequelize');\nmodule.exports = (sequelize, DataTypes) => {\n  class Hobbies extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n      Hobbies.associate = function(models) {\n        Hobbies.belongsTo(models.Students, { foreignKey: 'studentId' })\n      };\n    }\n  };\n  Hobbies.init({\n    title: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Hobbies',\n  });\n  return Hobbies;\n};","'use strict';\n\n\n\nconst Sequelize = require('sequelize');\nconst sequelize = require('../config/database');\n\nconst Student = sequelize.define('Students', {\n  firstName: {\n    allowNull: false,\n    type: Sequelize.STRING,\n  },\n  email: {\n    allowNull: false,\n    type: Sequelize.STRING,\n    unique: true,\n  }\n});\n\nmodule.exports = Student;\n\n// const {\n//   Model\n// } = require('sequelize');\n// module.exports = (sequelize, DataTypes) => {\n//   class Student extends Model {\n//     /**\n//      * Helper method for defining associations.\n//      * This method is not a part of Sequelize lifecycle.\n//      * The `models/index` file will call this method automatically.\n//      */\n//     static associate(models) {\n//       // define association here\n//       Student.associate = function(models) {\n//         Student.hasMany(models.Hobbies)\n//       };\n//     }\n//   };\n//   Student.init({\n//     firstName: DataTypes.STRING,\n//     email: DataTypes.STRING\n//   }, {\n//     sequelize,\n//     modelName: 'Student',\n//   });\n//   return Student;\n// };","\nconst Sequelize = require('sequelize');\nconst sequelize = require('../config/database');\n\nconst User = sequelize.define('Users', {\n  name: {\n    allowNull: false,\n    type: Sequelize.STRING,\n  },\n  email: {\n    allowNull: false,\n    type: Sequelize.STRING,\n    unique: true,\n  }\n});\n\nconst Post = sequelize.define('Posts', {\n  title: {\n    type: Sequelize.STRING,\n    allowNull: false\n  },\n\n  content: {\n      type: Sequelize.STRING,\n      allowNull: false\n  }\n});\n\n// Relationships\nUser.hasMany(Post);\nPost.belongsTo(User);\n\nmodule.exports = User, Post;\n\n\n\n\n\n\n\n\n\n\n\n// 'use strict';\n// const {\n//   Model\n// } = require('sequelize');\n// module.exports = (sequelize, DataTypes) => {\n//   class User extends Model {\n//     /**\n//      * Helper method for defining associations.\n//      * This method is not a part of Sequelize lifecycle.\n//      * The `models/index` file will call this method automatically.\n//      */\n//     static associate(models) {\n//       // define association here\n//     }\n//   };\n//   User.init({\n//     firstName: DataTypes.STRING,\n//     lastName: DataTypes.STRING,\n//     email: DataTypes.STRING\n//   }, {\n//     sequelize,\n//     modelName: 'User',\n//   });\n//   return User;\n// };\n\n// module.exports = User;","module.exports = require(\"apollo-server\");;","module.exports = require(\"graphql-redis-subscriptions\");;","module.exports = require(\"ioredis\");;","module.exports = require(\"moment\");;","module.exports = require(\"sequelize\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(519);\n"],"sourceRoot":""}